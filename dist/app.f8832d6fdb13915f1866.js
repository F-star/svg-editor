(()=>{"use strict";var t={279:(t,e,s)=>{s.r(e),s.d(e,{NS:()=>i});const i={HTML:"http://www.w3.org/1999/xhtml",MATH:"http://www.w3.org/1998/Math/MathML",SE:"http://svg-edit.googlecode.com",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}},546:(t,e,s)=>{s.r(e),s.d(e,{EditorEventContext:()=>i});class i{constructor(t,e){this.mousePressed=!1,this.originEvent=e,this.editor=t,this.isEndInside=!1,this.startX=0,this.startY=0,this.offsetX=0,this.offsetY=0,this.startClientX=0,this.startClientY=0,this.dx=0,this.dy=0,this.setStartPos()}setOriginEvent(t){this.originEvent=t}setStartPos(){const{x:t,y:e}=this.getPos();this.startX=t,this.startY=e,this.startClientX=this.originEvent.clientX,this.startClientY=this.originEvent.clientY}releaseMouse(){this.mousePressed=!1}pressMouse(){this.mousePressed=!0}getPos(){const t=this.editor.getZoom(),{x:e,y:s}=this.editor.getContentOffset();return{x:this.originEvent.offsetX/t-e,y:this.originEvent.offsetY/t-s}}getStartPos(){return{x:this.startX,y:this.startY}}getDiffPos(){return{x:this.originEvent.clientX-this.startClientX,y:this.originEvent.clientY-this.startClientY}}}},105:(t,e,s)=>{function i(t){const e=t.getAttribute("viewBox");if(!e)throw new Error("has not viewBox attribute");const[s,i,n,r]=e.split(/[\s,]+/).map((t=>parseFloat(t)));return{x:s,y:i,w:n,h:r}}s.r(e),s.d(e,{getViewBox:()=>i})}},e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={exports:{}};return t[i](n,n.exports,s),n.exports}s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{class t{constructor(t,e,s,i){"object"==typeof t?(this.x=t.x,this.y=t.y,this.w=t.width,this.h=t.height):(this.x=t,this.y=e,this.w=s,this.h=i),this.width=this.w,this.height=this.h,this.x2=this.x+this.w,this.y2=this.y+this.h}contains(t){return this.x<=t.x&&this.y<=t.y&&this.x2>=t.x+t.width&&this.y2>=t.y+t.height}merge(e){const s=Math.min(this.x,e.x),i=Math.min(this.y,e.y),n=Math.max(this.x2,e.x2),r=Math.max(this.y2,e.y2);return new t(s,i,n-s,r-i)}}var e=s(279);class i{constructor(){this.el_=null}el(){return this.el_}setAttr(t,e){return this.el_.setAttribute(t,e)}getAttr(t){return this.el_.getAttribute(t)}getBBox(){return this.el_.getBBox()}remove(){return this.el_.remove()}parent(){return new n.Group(this.el_.parentElement)}nextSibling(){const t=this.el_.nextElementSibling;return null==t?t:n.create(t)}previousSibling(){const t=this.el_.previousSibling;return null==t?t:n.create(t)}append(t){this.el_.appendChild(t.el())}front(){this.el_.parentElement.appendChild(this.el_)}back(){const t=this.el_.parentElement,e=t.firstElementChild;e&&t.insertBefore(this.el_,e)}forward(){const t=this.el_.parentElement,e=referElement.nextSibling;e&&t.insertBefore(e,this.el_)}backward(){const t=referElement.previousSibling;t&&this.before(t)}before(t){t.el&&(t=t.el());t.parentElement.insertBefore(this.el_,t)}after(t){t.el&&(t=t.el());const e=t.parentElement,s=t.nextSibling;s?e.insertBefore(this.el_,s):e.appendChild(this.el_)}}const n={create:function(t){const e=t.tagName;if("rect"===e)return new n.Rect(t);if("g"===e)return new n.Group(t);throw new Error(`Can not creat ${e} instance, no match class.`)},Rect:class extends i{constructor(t,s,i,n){super(),"object"==typeof t?this.el_=t:(this.el_=document.createElementNS(e.NS.SVG,"rect"),this.setAttr("x",t),this.setAttr("y",s),this.setAttr("width",i),this.setAttr("height",n))}getPos(){return{x:parseFloat(this.getAttr("x")),y:parseFloat(this.getAttr("y"))}}dmove(t,e){const s=this.getPos();this.setAttr("x",s.x+t),this.setAttr("y",s.y+e)}},Box:t,Group:class extends i{constructor(t){super(),this.el_=t||document.createElementNS(e.NS.SVG,"g")}}};class r{constructor(t){this.editor=t,this.els=[]}setEls(t){Array.isArray(t)||(t=[t]),this.els=t,this.heighligthEls(),this.setSettingFill()}getEls(){return this.els}setElsInBox(t){if(0===t.width||0===t.height)return void this.clear();const e=function(t,e){const s=["g"];t=new n.Box(t);const i=[];return function t(e,r){const o=r.children;for(let r=0;r<o.length;r++){const h=o[r];if(!s.includes(h.tagName)){const t=h.getBBox();e.contains(t)&&i.push(n.create(h))}h.children.length>0&&t(e,h)}}(t,e),i}(t,this.editor.svgContent);0===e.length?this.clear():this.setEls(e)}isEmpty(){return 0==this.els.length}isNoEmpty(){return this.els.length>0}clear(){this.els=[];this.editor.hudManager.outlineBoxHud.clear()}contains(t){for(let e=0;e<this.els.length;e++)if(this.els[e].el()===t)return!0;return!1}getMergeBBox(){}heighligthEls(){const t=this.els,e=this.editor.hudManager,s=new n.Box(t[0].getBBox()),i=t.reduce(((t,e)=>{const s=e.getBBox();return t.merge(new n.Box(s))}),s);e.outlineBoxHud.drawRect(i.x,i.y,i.width,i.height)}setSettingFill(){const t=this.els.map((t=>t.getAttr("fill")));this.editor.setting.setFill(t[0])}setElsAttr(t,e){this.isNoEmpty()&&this.editor.executeCommand("setAttr",this.els,t,e)}}const{NS:o}=s(279);class h{constructor(t){this.x=0,this.y=0,this.w=0,this.h=0,this.container=document.createElementNS(o.SVG,"g"),this.container.id="outline-box-hud",t.appendChild(this.container),this.outline=document.createElementNS(o.SVG,"path"),this.outline.setAttribute("fill","none"),this.outline.setAttribute("stroke","#f04"),this.outline.setAttribute("vector-effect","non-scaling-stroke"),this.container.appendChild(this.outline)}clear(){this.outline.style.display="none"}drawRect(t,e,s,i){this.x=t,this.y=e,this.w=s,this.h=i;const n=`M ${t} ${e} L ${t+s} ${e} L ${t+s} ${e+i} L ${t} ${e+i} Z`;this.outline.setAttribute("d",n),this.outline.style.display=""}getWidth(){return this.w}getHeight(){return this.h}getX(){return this.x}getY(){return this.y}}const{NS:l}=s(279);class a{constructor(t){this.x=0,this.y=0,this.w=0,this.h=0,this.container=document.createElementNS(l.SVG,"g"),this.container.id="select-area",t.appendChild(this.container),this.outline=document.createElementNS(l.SVG,"path"),this.outline.setAttribute("fill","none"),this.outline.setAttribute("stroke","#054"),this.outline.setAttribute("vector-effect","non-scaling-stroke"),this.outline.setAttribute("stroke-dasharray","4px"),this.container.appendChild(this.outline)}clear(){this.x=this.y=this.w=this.h=0,this.outline.style.display="none"}drawRect(t,e,s,i){this.x=t,this.y=e,this.w=s,this.h=i;const n=`M ${t} ${e} L ${t+s} ${e} L ${t+s} ${e+i} L ${t} ${e+i} Z`;this.outline.setAttribute("d",n),this.outline.style.display=""}getWidth(){return this.w}getHeight(){return this.h}getX(){return this.x}getY(){return this.y}getBox(){return{x:this.x,y:this.y,width:this.w,height:this.h,w:this.w,h:this.h}}}const{NS:c}=s(279);class d{constructor(){this.container=document.createElementNS(c.SVG,"g"),this.container.id="huds",this.selectArea=new a(this.container),this.outlineBoxHud=new h(this.container)}mount(t){t.appendChild(this.container)}}class u{constructor(t){this.editor=t,this.registeredFns={},window.addEventListener("keydown",(t=>{const e=function(t){const e=[];t.ctrlKey&&e.push("Ctrl");t.metaKey&&e.push("Cmd");t.shiftKey&&e.push("Shift");/Key./.test(t.code)?e.push(t.code[t.code.length-1]):e.push(t.code);return e.join("+")}(t),s=this.registeredFns[e];s&&(console.log(e),t.preventDefault(),s.fn(t))}),!1)}register(t,e,s){this.registeredFns[e]={cmdName:t,fn:s}}formatPrint(){const t=[];for(let e in this.registeredFns){const s=this.registeredFns[e].cmdName;t.push(s+": "+e)}return t.join(", ")}}const g=class{constructor(){this.setting=null,this.commandManager=null,this.zoomManager=null,this.activedElsManager=new r(this),this.shortcut=new u(this);const t=document.createElement("div");t.id="viewport",t.style.border="1px solid #000",t.style.width="800px",t.style.height="550px",this.viewport=t;const e=document.createElement("div");e.id="svg-container",e.style.backgroundColor="#ddd",e.style.width="800px",e.style.height="550px",e.style.overflow="scroll",this.svgContainer=e;const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.id="svg-root",s.setAttribute("width",1e3),s.setAttribute("height",600),s.setAttribute("viewBox","0 0 1000 600"),this.svgRoot=s;const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.id="svg-stage",i.setAttribute("width",400),i.setAttribute("height",300),i.setAttribute("x",300),i.setAttribute("y",150),i.style.overflow="visible",this.svgStage=i;const n=document.createElementNS("http://www.w3.org/2000/svg","g");n.id="background",n.setAttribute("x",0),n.setAttribute("y",0);const o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("fill","#fff");const h=document.createElementNS("http://www.w3.org/2000/svg","g");h.id="content",h.setAttribute("x",0),h.setAttribute("y",0),this.svgContent=h;const l=document.createElementNS("http://www.w3.org/2000/svg","g");l.id="layer-1",this.currentLayer=l,t.appendChild(e),e.appendChild(s),s.appendChild(i),i.appendChild(n),n.appendChild(o),i.appendChild(h),h.appendChild(l),this.hudManager=new d,this.hudManager.mount(i)}mount(t){document.querySelector(t).appendChild(this.viewport)}getCurrentLayer(){return this.currentLayer}setToolManager(t){this.toolManager=t}setCurrentTool(t){this.toolManager.setCurrentTool(t)}registerTool(t){this.toolManager.registerTool(t)}setSetting(t){this.setting=t}setCommandManager(t){this.commandManager=t}executeCommand(t,...e){"undo"!=t?"redo"!=t?this.commandManager.execute(t,...e):this.commandManager.redo():this.commandManager.undo()}setZoomManager(t){t.setEditor(this),this.zoomManager=t}getZoom(){return this.zoomManager.getZoom()}getScroll(){return{x:this.svgContainer.scrollLeft,y:this.svgContainer.scrollTop}}setScroll(t,e){this.svgContainer.scrollLeft=t,this.svgContainer.scrollTop=e}getContentOffset(){return{x:this.svgStage.getAttribute("x"),y:this.svgStage.getAttribute("y")}}isContentElement(t){for(;t;){if(t.parentElement==this.svgContent)return!0;if(t.parentElement==this.svgRoot)return!1;t=t.parentElement}return!1}};function m(t,e,s,i){let n,r,o,h;return o=Math.abs(s-t),h=Math.abs(i-e),n=Math.min(s,t),r=Math.min(i,e),{x:n,y:r,w:o,h}}const f=class{constructor(){this.editor=null}name(){return"addRect"}setEditor(t){this.editor=t}start(t){}move(t){const{x:e,y:s}=t.getPos(),{x:i,y:n}=t.getStartPos(),{x:r,y:o,w:h,h:l}=m(i,n,e,s);this.editor.hudManager.outlineBoxHud.drawRect(r,o,h,l)}end(t){this.editor.hudManager.outlineBoxHud.clear();const{x:e,y:s}=t.getPos(),{x:i,y:n}=t.getStartPos(),{x:r,y:o,w:h,h:l}=m(i,n,e,s);h<2&&l<2?console.log("width and height both less equal to 2，drawing nothing"):this.editor.executeCommand("addRect",r,o,h,l)}endOutside(){this.editor.hudManager.outlineBoxHud.clear()}};class p{undo(){throw new Error("please override undo method")}redo(){throw new Error("please override redo method")}afterRedo(){}afterUndo(){}}class w extends p{constructor(t,e,s,i,r){super(),this.editor=t;const o=new n.Rect(e,s,i,r),h=t.setting.get("fill"),l=t.setting.get("stroke"),a=t.setting.get("strokeWidth");o.setAttr("fill",h),o.setAttr("stroke",l),o.setAttr("stroke-width",a),t.getCurrentLayer().appendChild(o.el()),this.nextSibling=o.el().nextElementSibling,this.parent=o.el().parentElement,this.rect=o,this.editor.activedElsManager.setEls(this.rect)}static name(){return"addRect"}redo(){const t=this.rect.el();this.nextSibling?this.parent.insertBefore(t,this.nextSibling):this.parent.appendChild(t),this.editor.activedElsManager.setEls(this.rect)}undo(){this.rect.el().remove(),this.editor.activedElsManager.clear()}}class x extends p{constructor(t){super(),this.editor=t,this.els=this.editor.activedElsManager.getEls();const e=this.els.length;this.parents=new Array(e),this.nextSiblings=new Array(e),this.els.forEach(((t,e)=>{this.nextSiblings[e]=t.el().nextElementSibling,this.parents[e]=t.el().parentElement})),this.execute()}static name(){return"removeSelectedElements"}execute(){this.els.forEach((t=>{t.remove()})),this.editor.activedElsManager.clear()}redo(){this.execute()}undo(){for(let t=this.els.length-1;t>=0;t--){const e=this.els[t].el();this.nextSiblings[t]?this.parents[t].insertBefore(e,this.nextSiblings[t]):this.parents[t].appendChild(e)}this.editor.activedElsManager.setEls(this.els)}}class E extends p{constructor(t,e,s,i){super(),this.editor=t,this.dx=s,this.dy=i,this.els=e,this.els.forEach((t=>{t.dmove(this.dx,this.dy)}))}static name(){return"dmove"}redo(){this.els.forEach((t=>{t.dmove(this.dx,this.dy)}))}undo(){this.els.forEach((t=>{t.dmove(-this.dx,-this.dy)}))}afterRedo(){this.editor.activedElsManager.setEls(this.els)}afterUndo(){this.editor.activedElsManager.setEls(this.els)}}class v extends p{constructor(t,e,s,i){super(),this.editor=t,Array.isArray(e)||(e=[e]),this.els=e,this.attrName=s,this.beforeVal=this.els.map((t=>t.getAttr(s))),this.afterVal=i,this.els.forEach((t=>{t.setAttr(s,i)}))}static name(){return"setAttr"}redo(){this.els.forEach((t=>{t.setAttr(this.attrName,this.afterVal)}))}undo(){this.els.forEach(((t,e)=>{t.setAttr(this.attrName,this.beforeVal[e])}))}}class y extends p{constructor(t,e){if(super(),this.els=void 0===e?t.activedElsManager.getEls():e,0===this.els.length)throw new Error("elements can not be empty.");this.nextSiblings=new Array(this.els.length);for(let t=0;t<this.els.length;t++){const e=this.els[t];this.nextSiblings[t]=e.nextSibling(),e.front()}}static name(){return"front"}undo(){for(let t=this.els.length-1;t>=0;t--){const e=this.els[t],s=this.nextSiblings[t];null!==s&&e.before(s)}}redo(){for(let t=0;t<this.els.length;t++){this.els[t].front()}}}class S extends p{constructor(t,e){if(super(),this.els=void 0===e?t.activedElsManager.getEls():e,0===this.els.length)throw new Error("elements can not be empty.");this.previousSiblings=new Array(this.els.length);for(let t=this.els.length-1;t>=0;t--){const e=this.els[t];this.previousSiblings[t]=e.previousSibling()}this.exec()}static name(){return"back"}undo(){const t=this.els.length;for(let e=0;e<t;e++){const t=this.els[e],s=this.previousSiblings[e];null!==s&&t.after(s)}}redo(){this.exec()}exec(){for(let t=this.els.length-1;t>=0;t--){this.els[t].back()}}}class b extends p{constructor(t,e){if(super(),this.els=void 0===e?t.activedElsManager.getEls():e,0===this.els.length)throw new Error("elements can not be empty.");this.exec()}static name(){return"forward"}exec(){let t=null;for(let e=this.els.length-1;e>=0;e--){const s=this.els[e],i=s.el().nextSibling;null!==t&&i===t||i&&s.after(i),t=s.el()}}undo(){}redo(){this.exec()}}const C=class{constructor(t){this.editor=t,this.redoStack=[],this.undoStack=[],this.commandClasses={},this.resigterCommandClass(w),this.resigterCommandClass(E),this.resigterCommandClass(v),this.resigterCommandClass(x),this.resigterCommandClass(y),this.resigterCommandClass(S),this.resigterCommandClass(b)}setEditor(t){this.editor=t}execute(t,...e){const s=this.commandClasses[t];if(!s)throw new Error(`editor has not the ${t} command`);const i=new s(this.editor,...e);this.undoStack.push(i),this.redoStack=[]}undo(){if(0===this.undoStack.length)return void console.log("undo stack is empty, can not undo");const t=this.undoStack.pop();this.redoStack.push(t),t.undo(),t.afterUndo()}redo(){if(0===this.redoStack.length)return void console.log("redo stack is empty, can not redo");const t=this.redoStack.pop();this.undoStack.push(t),t.redo(),t.afterRedo()}resigterCommandClass(t){const e=t.name();this.commandClasses[e]=t}afterAnyUndo(){}};const{getViewBox:M}=s(105);const{EditorEventContext:A}=s(546);const k=new g;window.editor=k;const B=new C(k);k.setCommandManager(B),k.setSetting(new class{constructor(){this.setting={},this.bindedEventFns={},this.setFill("#fff"),this.setStroke("#000"),this.set("strokeWidth","1px")}setFill(t){this.set("fill",t)}setStroke(t){this.set("stroke",t)}set(t,e){this.setting[t]=e;const s=this.bindedEventFns[t];s&&s.forEach((t=>{t(e)}))}get(t){return this.setting[t]}bindEvent(t,e){this.bindedEventFns[t]||(this.bindedEventFns[t]=[]),this.bindedEventFns[t].push(e)}removeEvent(t,e){if(!this.bindedEventFns[t])return!1;const s=this.bindedEventFns[t].findIndex(e);return-1!==s&&(this.bindedEventFns.splice(s,1),!0)}});const T=new class{constructor(t){this.editor=t,this.tools={},this.currentTool=null,this.invokeWhenSwitch=()=>{},this.ctx=null}setCurrentTool(t){this.currentTool=this.tools[t],this.invokeWhenSwitch(this.getCurrentToolName())}onSwitchTool(t){this.invokeWhenSwitch=t}getCurrentToolName(){return this.currentTool.name()}registerTool(t){this.tools[t.name()]=t,t.setEditor(this.editor)}bindToolEvent(){const t=this.editor.svgRoot;t.addEventListener("mousedown",(t=>{const e=new A(this.editor,t);this.ctx=e,this.currentTool.start(e)}),!1),t.addEventListener("mousemove",(t=>{const e=this.ctx;e&&(e.setOriginEvent(t),e.pressMouse(),this.currentTool.move(e))}),!1),t.addEventListener("mouseup",(t=>{const e=this.ctx;this.currentTool.end(e),e.isEndInside=!0}),!1),window.addEventListener("mouseup",(t=>{this.ctx&&0==this.ctx.isEndInside&&this.currentTool.endOutside(this.ctx),this.ctx=null}),!1)}}(k);k.setToolManager(T),T.registerTool(new f),T.registerTool(new class{constructor(){this.startOffsetX=0,this.startOffsetY=0}name(){return"dragCanvas"}setEditor(t){this.editor=t}beforeActive(){}start(t){const e=this.editor.getScroll();this.startOffsetX=e.x,this.startOffsetY=e.y}move(t){this.editor.getZoom();const{x:e,y:s}=t.getDiffPos();this.editor.setScroll(this.startOffsetX-e,this.startOffsetY-s)}end(){}endOutside(){}}),T.registerTool(new class{constructor(){this.editor=null,this.selectedEls=[],this.outlineStartX=0,this.outlineStartY=0}name(){return"select"}setEditor(t){this.editor=t}hasSelectedElsWhenStart(){return this.selectedEls.length>0}start(t){const e=t.originEvent.target;if(!this.editor.isContentElement(e))return;const s=n.create(e),i=this.editor.activedElsManager;i.contains(e)?i.heighligthEls():i.setEls(s),this.selectedEls=i.getEls();const r=this.editor.hudManager.outlineBoxHud;this.outlineStartX=r.getX(),this.outlineStartY=r.getY()}move(t){if(!this.hasSelectedElsWhenStart()){const{x:e,y:s}=t.getPos(),{x:i,y:n}=t.getStartPos(),{x:r,y:o,w:h,h:l}=m(i,n,e,s);return void this.editor.hudManager.selectArea.drawRect(r,o,h,l)}const{x:e,y:s}=t.getDiffPos(),i=this.editor.hudManager.outlineBoxHud,n=i.getWidth(),r=i.getHeight();i.drawRect(this.outlineStartX+e,this.outlineStartY+s,n,r)}end(t){if(!this.hasSelectedElsWhenStart()){const t=this.editor.hudManager.selectArea.getBox();return this.editor.hudManager.selectArea.clear(),void this.editor.activedElsManager.setElsInBox(t)}this.editor.hudManager.outlineBoxHud.clear();const{x:e,y:s}=t.getDiffPos();this.editor.executeCommand("dmove",this.selectedEls,e,s),this.editor.activedElsManager.setEls(this.selectedEls),this.selectedEls=[]}endOutside(){this.editor.hudManager.outlineBoxHud.clear(),this.editor.hudManager.selectArea.clear(),this.editor.activedElsManager.clear(),this.selectedEls=[]}}),k.toolManager.onSwitchTool((t=>{console.log("switched tool:",t),function(t){if(null==(t={select:"btn-select",addRect:"btn-add-rect",dragCanvas:"btn-drag-canvas"}[t]))return;const e=document.querySelector("#tool-bar");Array.prototype.slice.call(e.children).forEach((t=>{t.classList.remove("active")})),document.getElementById(t).classList.add("active")}(t)})),T.setCurrentTool("addRect"),T.bindToolEvent(),k.setZoomManager(new class{constructor(){this.editor=null}setEditor(t){this.editor=t}getZoom(){return parseFloat(this.editor.svgRoot.getAttribute("width"))/M(this.editor.svgRoot).w}setZoom(t){console.log(t);const e=M(this.editor.svgRoot),s=e.w*t,i=e.h*t;this.editor.svgRoot.setAttribute("width",s),this.editor.svgRoot.setAttribute("height",i)}zoomIn(){const t=this.getZoom();this.setZoom(t+.1)}zoomOut(){const t=this.getZoom();this.setZoom(t-.1)}}),k.mount("#editor-area"),document.querySelector("#btn-undo").onclick=()=>{k.executeCommand("undo")},document.querySelector("#btn-redo").onclick=function(){k.executeCommand("redo")},document.querySelector("#btn-zoom-in").onclick=function(){k.zoomManager.zoomIn()},document.querySelector("#btn-zoom-out").onclick=function(){k.zoomManager.zoomOut()},document.querySelector("#btn-add-rect").onclick=function(){k.setCurrentTool("addRect")},document.querySelector("#btn-drag-canvas").onclick=function(){k.setCurrentTool("dragCanvas")},document.querySelector("#btn-select").onclick=function(){k.setCurrentTool("select")},document.querySelector("#btn-delete").onclick=function(){k.activedElsManager.isNoEmpty()&&k.executeCommand("removeSelectedElements")},document.querySelector("#btn-front").onclick=function(){k.activedElsManager.isNoEmpty()&&k.executeCommand("front")},document.querySelector("#btn-forward").onclick=function(){k.activedElsManager.isNoEmpty()&&k.executeCommand("forward")},document.querySelector("#btn-back").onclick=function(){k.activedElsManager.isNoEmpty()&&k.executeCommand("back")};const N=document.querySelector("#element-info-fill");N.innerHTML=k.setting.get("fill"),k.setting.bindEvent("fill",(t=>{N.innerHTML=t})),document.querySelector("#set-fill-btn").onclick=function(){const t=window.prompt("Please input valid color value（like #ffce43）",k.setting.get("fill"));t&&(N.innerHTML=t,k.setting.setFill(t),k.activedElsManager.setElsAttr("fill",t))};const L=document.querySelector("#element-info-stroke");L.innerHTML=k.setting.get("stroke"),k.setting.bindEvent("stroke",(t=>{L.innerHTML=t})),document.querySelector("#set-stroke-btn").onclick=function(){const t=window.prompt("Please input valid color value（like #ffce43）",k.setting.get("stroke"));t&&(L.innerHTML=t,k.setting.setStroke(t),k.activedElsManager.setElsAttr("stroke",t))},k.shortcut.register("Undo","Cmd+Z",(()=>{k.executeCommand("undo")})),k.shortcut.register("Undo","Ctrl+Z",(()=>{k.executeCommand("undo")})),k.shortcut.register("Redo","Cmd+Shift+Z",(()=>{k.executeCommand("redo")})),k.shortcut.register("Redo","Ctrl+Shift+Z",(()=>{k.executeCommand("redo")})),k.shortcut.register("Delete","Backspace",(()=>{k.activedElsManager.isNoEmpty()&&k.executeCommand("removeSelectedElements")})),document.querySelector("#shortcut").innerHTML=k.shortcut.formatPrint()})()})();